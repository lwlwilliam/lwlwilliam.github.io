---
title: 浮点数表示
layout: post
categories: [计算机原理]
---

根据国际标准 IEEE 754，任意一个二进制小数 V 可以表示成以下形式：

![WX20190401-121514.png](/assets/images/20190401/WX20190401-121514.png)

1.  (-1)^s 表示符号位，当 s 为 0 时，V 为正数；当 s 为 1 时，V 为负数；
2.  M 表示有效数字，值范围为 [1, 2) 之间的实数；
3.  2^E 表示指数位，E 可为负数；

对于 32 位浮点数，最高 1 位是符号位 s，接着是 8 位指数 E，剩下 23 位是有效数字 M；对于 64 位浮点数，最高 1 位是符号位 s，接着是 11 位指数 E，剩下 52 位是有效数字 M。

以下是一段提取 32 位浮点数所有位的小程序：

```c
#include <stdio.h>
#include <string.h>

int main() {
    float data;
    unsigned long buff;
    int i;
    char s[35];

    // 将 0.75 以单精度浮点数的形式存储在变量 data 中
    data = (float)0.75;	// 可以把 0.75 改为 0.1 看看

    // 把数据复制到 4 字节长度的整数变量 buff 中逐个提取出每一位
    memcpy(&buff, &data, 4);

    // 逐一提取出每一位
    for (i = 33; i >= 0; i --) {
        if (i == 1 || i == 10) {
            // 加入破折号来区分符号部分、指数部分和尾数部分
            s[i] = '-';
        } else {
             // 为各个字节赋值 '0' 或 '1'
             if (buff % 2 == 1) {
                s[i] = '1';
             } else {
                s[i] = '0';
             }
             buff /= 2;
        }
    }
    s[34] = '\0';

    printf("%s\n", s);
}
```